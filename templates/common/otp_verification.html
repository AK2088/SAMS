{% extends "common/base.html" %}

{% block title %}OTP Verification | SAMS{% endblock %}

{% block content %}
{% if not registration_success %}

<div class="container py-5">

    <div class="row justify-content-center">
        <div class="col-lg-5 col-md-7">

            <!-- Info Message -->
            <div class="alert alert-info text-center mb-4" role="alert">
                An OTP has been sent to <strong>{{ email|default:"your registered email" }}</strong>

            </div>

            {% if error %}
            <div class="alert alert-danger text-center mb-3" role="alert">
                OTP Invalid, please try again.
            </div>
            {% endif %}

            <div class="card shadow-sm border-0">
                <div class="card-body p-4">

                    <h3 class="fw-bold text-center mb-4">
                        Verify OTP
                    </h3>

                    <form method="post" >
                        {% csrf_token %}

                        <!-- OTP Input -->
                        <div class="mb-4">
                            <input
                                type="text"
                                name="otp"
                                class="form-control text-center fs-5"
                                placeholder="Enter otp"
                                maxlength="6"
                                required
                            >
                        </div>

                        <!-- Verify Button -->
                        <button type="submit" class="btn btn-primary w-100 mb-3">
                            Verify OTP
                        </button>

                        <!-- Resend OTP -->
                        <div class="text-center">
                            <small class="text-muted">
                                Didn't receive the OTP?
                                {% if registration_mode == 'faculty' %}
                                    <a href="{% url 'facultyRegister' %}" class="text-decoration-none">
                                        Resend OTP
                                    </a>
                                {% elif registration_mode == 'student' %}
                                    <a href="{% url 'studentRegister' %}" class="text-decoration-none">
                                        Resend OTP
                                    </a>
                                {% else %}
                                    <a href="{% url 'role' %}" class="text-decoration-none">
                                        Resend OTP
                                    </a>
                                {% endif %}
                            </small>
                        </div>

                    </form>

                </div>
            </div>

        </div>
    </div>

</div>
{% else %}

<div class="container d-flex align-items-center justify-content-center min-vh-100 px-3">

    <div class="card shadow-sm p-4 text-center" style="max-width: 420px; width: 100%;">

        <!-- Success Icon -->
        <div class="mb-3 position-relative d-inline-block">
    <!-- Shield -->
    <svg xmlns="http://www.w3.org/2000/svg"
         width="64"
         height="64"
         fill="#198754"
         class="bi bi-shield-fill"
         viewBox="0 0 16 16">
        <path d="M5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 3.088.952.14.05.262.18.27.34.088 1.76.042 4.635-.69 6.87-.67 2.04-2.223 3.95-4.313 5.07a.93.93 0 0 1-.566.12.93.93 0 0 1-.566-.12c-2.09-1.12-3.643-3.03-4.313-5.07-.732-2.235-.778-5.11-.69-6.87a.37.37 0 0 1 .27-.34c.86-.297 1.978-.652 3.088-.952z"/>
    </svg>


        <!-- Message -->
        <h4 class="fw-semibold mb-2">Registration Successful</h4>
        <p class="text-muted mb-4">
            Your account has been created successfully.<br>
            Please log in to continue.
        </p>

        <!-- Action -->
        <a href="{% url 'login' %}" class="btn btn-success w-100">
            Go to Login
        </a>

    </div>

</div>
{% endif %}
{% endblock %}

